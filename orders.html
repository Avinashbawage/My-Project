<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;900&display=swap"
    rel="stylesheet">
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"
      integrity="sha512-xIPqqrfvUAc/Cspuj7Bq0UtHNo/5qkdyngx6Vwt+tmbvTLDszzXM0G6c91LXmGrRx8KEPulT+AfOOez+TeVylg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <style>
      #orders {
        color: #20b883;
        border-bottom: 3px solid #20b883;
      }

      /*      #logout {
        position: absolute;
        right: 20px;
        font-size: 16px;
        cursor: pointer;
      }

      .maincontainer {
        margin-top: 100px;
        width: 100%;
        box-sizing: border-box;
        padding: 0 8% 4%;
      }

      .Homepageorders {
        display: flex;
        align-items: baseline;
      }
      #filters {
        width: 180px;
        display: flex;
        flex-direction: column;
        margin: 6px 0;
        cursor: pointer;
      }

      .Homepage_OrderTable {
        width: 100%;
      }
      #filtertxt {
        font-size: 20px;
        font-weight: bold;
      }
      label {
        margin: 10px 0;
      }

      .Homepage_OrderTable td {
        text-align: center;
      } */
    </style>
    <title>Web App</title>
  </head>

  <body>
    <div class="Topbar_Topbar">
      <div class="Topbar_LogoWrapper">
        <img src="./logo.58169365.png" alt="logo" />
        <p class="Topbar_BrandName">Kafene</p>
      </div>
      <nav>
        <a href="orders.html" id="orders">Orders</a>
        <a href="product.html">Products</a>
        <a href="users.html">Users</a>
      </nav>
      <p id="logout" onclick="logOut()">Logout</p>
    </div>

    <div class="maincontainer">
      <h1>Orders</h1>
      <div class="Homepageorders">
        <div id="filters">
          <p id="filtxt">Filters</p>
          <p id="count">Count:0</p>
          <!--  <label
            ><input type="checkbox" class="check" onclick="filterArr()" />
            New</label
          >
          <label
            ><input type="checkbox" class="check" onclick="filterArr()" />
            Packed</label
          >
          <label
            ><input type="checkbox" class="check" onclick="filterArr()" />
            InTransit</label
          > -->
          <div>
            <p>
              <label class="checkbox"
                ><input
                  type="checkbox"
                  name="orders"
                  value="New"
                  checked
                  onclick="getUsers()"
                />New</label
              >
            </p>
            <p>
              <label class="checkbox"
                ><input
                  type="checkbox"
                  name="orders"
                  value="Packed"
                  checked
                  onclick="getUsers()"
                />Packed</label
              >
            </p>
            <p>
              <label class="checkbox"
                ><input
                  type="checkbox"
                  name="orders"
                  value="InTransit"
                  checked
                  onclick="getUsers()"
                />InTransition</label
              >
            </p>
            <p>
              <label class="checkbox"
                ><input
                  type="checkbox"
                  name="orders"
                  value="Delivered"
                  checked
                  onclick="getUsers()"
                />Delievered</label
              >
            </p>
          </div>
        </div>

        <table class="Homepage_OrderTable">
          <tr>
            <th>ID</th>
            <th>Customer</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Status</th>
          </tr>

          <tbody id="mytabledata">
            <tr></tr>
          </tbody>
        </table>
      </div>
    </div>

    <script>
             let status = window.localStorage.getItem("loginStatus");
       function logOut() {
           window.localStorage.setItem("loginStatus", "false")
           window.location.href = "index.html";
       }

      const getUsers = () => {
        axios
          .get("https://5fc1a1c9cb4d020016fe6b07.mockapi.io/api/v1/orders")
          .then(function (response) {
            // handle success
            var mydatas = response.data;
            console.log(mydatas);

            let resEle = document.querySelector(".result");
            // get the value of checkbox which are selected and stroed in array
            let checkboxArray = [];
            let finalData = [];
            let filtredData = [];
            document.getElementById("mytabledata").innerHTML = "";
            var cb = document.getElementsByName("orders");
            var total = 0;
            for (var i = 0; i < cb.length; i++) {
              if (cb[i].checked) {
                checkboxArray.push(cb[i].value);
              }
            }

            // api data filter acc to checkbox
            filtredDataTotal = mydatas.filter((item) =>
              checkboxArray.includes(item.orderStatus)
            );
            var temp = " ";
            filtredDataTotal.forEach((itemData) => {
              temp += "<tr >";
              temp += "<td>" + itemData.id + "</td>";
              temp += "<td>" + itemData.customerName + "</td>";
              temp += "<td>" + itemData.orderDate + "</td>";
              temp += "<td>" + itemData.amount + "</td>";
              temp += "<td>" + itemData.orderStatus + "</td></tr>";
            });
            document.getElementById("mytabledata").innerHTML = temp;

            total = filtredDataTotal.length;
            let mycount1 = document.getElementById("count");
            mycount1.innerHTML = `Count: ${total}`;
    
            console.log(filtredDataTotal);
          });
      };
      getUsers();
    </script>
  </body>
</html>
